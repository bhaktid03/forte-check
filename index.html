<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Forte Checkout Sandbox Test</title>
  <!-- 1. Load jQuery FIRST -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- 2. Load Forte Checkout script AFTER jQuery -->
  <script src="https://sandbox.forte.net/checkout/v2/js"></script>
  <!-- 3. Load CryptoJS (if you need to generate signatures in JS) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <script>
    // WARNING: Never expose your Secure Key in production! This is for sandbox/testing only.
    function generateSignature() {
      var api_secure_key = "852d14b8761f2e6e88e42e72e6e353bd";
      var string_to_sign = "419c0fd038799f51c3b714ad0f4e60f6|sale|2.0|10.00|638887631917920000|TESTORDER123||";
      var signature = CryptoJS.HmacSHA256(string_to_sign, api_secure_key).toString(CryptoJS.enc.Hex);
      return signature;
    }
    function openForteCheckoutSandbox() {
      alert("Function called!");
      if (typeof ForteCheckout === 'undefined') {
        alert("ForteCheckout not loaded yet!");
        setTimeout(openForteCheckoutSandbox, 100);
        return;
      }
      alert("ForteCheckout loaded, opening modal...");
      ForteCheckout.open({
        api_access_id: "419c0fd038799f51c3b714ad0f4e60f6",
        signature: generateSignature(),
        method: "sale",
        version_number: "2.0",
        location_id: "399718",
        organization_id: "498415",
        utc_time: "638887631917920000",
        total_amount: "10.00",
        order_number: "TESTORDER123",
        allowed_methods: "visa,mast,disc,amex,echeck",
        callback: "onForteCallback",
        hash_method: "sha256"
      });
    }
    function onForteCallback(e) {
      alert(JSON.stringify(e.data || e));
    }
    // Call the function after all scripts are loaded
    window.onload = openForteCheckoutSandbox;
  </script>
</head>
<body>
  <h3>Loading payment...</h3>
</body>
</html>
